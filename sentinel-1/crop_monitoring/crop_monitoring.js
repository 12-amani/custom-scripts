/*
Author of the script: Maryam Salehi 
// Website: https://www.researchgate.net/profile/Maryam_Salehi13
*/

// ***
// Agricultural Crop Monitoring from Space using Sentinel-1 Multi-temporal images
// The script is based on the time series of Sentinel-1 radar data and it needs to be processed in Sentinel Playground.
// The example is here: 
// master_date = "2018-04-20"
// slave_date = "2018-04-24": https://apps.sentinel-hub.com/sentinel-playground-temporal/?source=S1-AWS-IW-VVVH&lat=44.683972246144066&lng=12.169933319091797&zoom=13&preset=CUSTOM&layers=VV,VV,VV&maxcc=100&gain=1.0&gamma=1.0&time=2017-01-01%7C2018-04-26&atmFilter=&showDates=true&evalscript=dmFyIG1hc3Rlcl9kYXRlID0gIjIwMTgtMDQtMjAiOyB2YXIgc2xhdmVfZGF0ZSA9ICIyMDE4LTA0LTI0IjsgLy8gQ29tYWNjaGlvLCBGZXJyYXJhLCBJdGFseSAgIAoKLy8gU2VsZWN0aW9uIG9mIHBvbGFyaXphdGlvbnMgCmZ1bmN0aW9uIHNldHVwIChkc3MpIHsKICBzZXRJbnB1dENvbXBvbmVudHMoW2Rzcy5WVixkc3MuVkhdKTsKICBzZXRPdXRwdXRDb21wb25lbnRDb3VudCgzKTsgIC8vIHJldHVybiBhcyBSR0IKfQoKZnVuY3Rpb24gZmlsdGVyU2NlbmVzIChzY2VuZXMpIHsgIApyZXR1cm4gc2NlbmVzLmZpbHRlcihmdW5jdGlvbiAoc2NlbmUpIHsKLy8gc2V0IGRhdGVzIGZvciBtYXN0ZXIgYW5kIHNsYXZlIGltYWdlcwp2YXIgYWxsb3dlZERhdGVzID0gW21hc3Rlcl9kYXRlLHNsYXZlX2RhdGVdOyAKdmFyIHNjZW5lRGF0ZVN0ciA9IGRhdGVmb3JtYXQoc2NlbmUuZGF0ZSk7CmlmIChhbGxvd2VkRGF0ZXMuaW5kZXhPZihzY2VuZURhdGVTdHIpIT0gLTEpIHJldHVybiB0cnVlOwplbHNlIHJldHVybiBmYWxzZTsKICB9KTsKfQoKLy8gQ3JvcCBNb25pdG9yaW5nCmZ1bmN0aW9uIGNhbGNCKHNhbXBsZSkgewogIHZhciBvdXRCID0gKC41KihzYW1wbGUuVlYpKTsKICByZXR1cm4gW291dEJdOwp9CmZ1bmN0aW9uIGNhbGNHKHNhbXBsZSkgewogIHZhciBvdXRHID0gKDgqKHNhbXBsZS5WSCkpOwogIHJldHVybiBbb3V0R107Cn0KZnVuY3Rpb24gY2FsY1Ioc2FtcGxlKSB7CiAgdmFyIG91dFIgPSAoMS41KihzYW1wbGUuVlYpKTsKICByZXR1cm4gW291dFJdOwp9CgpmdW5jdGlvbiBkYXRlZm9ybWF0KGQpeyAgCiAgdmFyIGRkID0gZC5nZXREYXRlKCk7CiAgdmFyIG1tID0gZC5nZXRNb250aCgpKzE7CiAgdmFyIHl5eXkgPSBkLmdldEZ1bGxZZWFyKCk7CiAgaWYoZGQ8MTApe2RkPScwJytkZH0KICBpZihtbTwxMCl7bW09JzAnK21tfQogIHZhciBpc29kYXRlID0geXl5eSsnLScrbW0rJy0nK2RkOwogIHJldHVybiBpc29kYXRlOwp9CmZ1bmN0aW9uIGV2YWx1YXRlUGl4ZWwoc2FtcGxlcyxzY2VuZXMpIHsgIAogIHZhciBSbWFzdGVyID0gMDt2YXIgUnNsYXZlID0gMDsKICB2YXIgR21hc3RlciA9IDA7dmFyIEdzbGF2ZSA9IDA7CiAgdmFyIEJtYXN0ZXIgPSAwO3ZhciBCc2xhdmUgPSAwOwogIFJtYXN0ZXIgPSBjYWxjUihzYW1wbGVzWzFdKTsKICBSc2xhdmUgPSBjYWxjUihzYW1wbGVzWzBdKTsgIAogIEdtYXN0ZXIgPSBjYWxjRyhzYW1wbGVzWzFdKTsKICBHc2xhdmUgPSBjYWxjRyhzYW1wbGVzWzBdKTsgIAogIEJtYXN0ZXIgPSBjYWxjQihzYW1wbGVzWzFdKTsKICBCc2xhdmUgPSBjYWxjQihzYW1wbGVzWzBdKTsKICBSZGlmPVJzbGF2ZS1SbWFzdGVyOwogIEdkaWY9R3NsYXZlLUdtYXN0ZXI7CiAgQmRpZj1Cc2xhdmUtQm1hc3RlcjsKICByZXR1cm4gW1JzbGF2ZSxHZGlmLEJzbGF2ZV0KfQ%3D%3D&temporal=true
// slave_date = "2018-05-06": https://apps.sentinel-hub.com/sentinel-playground-temporal/?source=S1-AWS-IW-VVVH&lat=44.683972246144066&lng=12.169933319091797&zoom=13&preset=CUSTOM&layers=VV,VV,VV&maxcc=100&gain=1.0&gamma=1.0&time=2017-01-01%7C2018-05-18&atmFilter=&showDates=true&evalscript=dmFyIG1hc3Rlcl9kYXRlID0gIjIwMTgtMDQtMjAiOyB2YXIgc2xhdmVfZGF0ZSA9ICIyMDE4LTA1LTA2IjsgLy8gQ29tYWNjaGlvLCBGZXJyYXJhLCBJdGFseSAgIAoKLy8gU2VsZWN0aW9uIG9mIHBvbGFyaXphdGlvbnMgCmZ1bmN0aW9uIHNldHVwIChkc3MpIHsKICBzZXRJbnB1dENvbXBvbmVudHMoW2Rzcy5WVixkc3MuVkhdKTsKICBzZXRPdXRwdXRDb21wb25lbnRDb3VudCgzKTsgIC8vIHJldHVybiBhcyBSR0IKfQoKZnVuY3Rpb24gZmlsdGVyU2NlbmVzIChzY2VuZXMpIHsgIApyZXR1cm4gc2NlbmVzLmZpbHRlcihmdW5jdGlvbiAoc2NlbmUpIHsKLy8gc2V0IGRhdGVzIGZvciBtYXN0ZXIgYW5kIHNsYXZlIGltYWdlcwp2YXIgYWxsb3dlZERhdGVzID0gW21hc3Rlcl9kYXRlLHNsYXZlX2RhdGVdOyAKdmFyIHNjZW5lRGF0ZVN0ciA9IGRhdGVmb3JtYXQoc2NlbmUuZGF0ZSk7CmlmIChhbGxvd2VkRGF0ZXMuaW5kZXhPZihzY2VuZURhdGVTdHIpIT0gLTEpIHJldHVybiB0cnVlOwplbHNlIHJldHVybiBmYWxzZTsKICB9KTsKfQoKLy8gQ3JvcCBNb25pdG9yaW5nCmZ1bmN0aW9uIGNhbGNCKHNhbXBsZSkgewogIHZhciBvdXRCID0gKC41KihzYW1wbGUuVlYpKTsKICByZXR1cm4gW291dEJdOwp9CmZ1bmN0aW9uIGNhbGNHKHNhbXBsZSkgewogIHZhciBvdXRHID0gKDgqKHNhbXBsZS5WSCkpOwogIHJldHVybiBbb3V0R107Cn0KZnVuY3Rpb24gY2FsY1Ioc2FtcGxlKSB7CiAgdmFyIG91dFIgPSAoMS41KihzYW1wbGUuVlYpKTsKICByZXR1cm4gW291dFJdOwp9CgpmdW5jdGlvbiBkYXRlZm9ybWF0KGQpeyAgCiAgdmFyIGRkID0gZC5nZXREYXRlKCk7CiAgdmFyIG1tID0gZC5nZXRNb250aCgpKzE7CiAgdmFyIHl5eXkgPSBkLmdldEZ1bGxZZWFyKCk7CiAgaWYoZGQ8MTApe2RkPScwJytkZH0KICBpZihtbTwxMCl7bW09JzAnK21tfQogIHZhciBpc29kYXRlID0geXl5eSsnLScrbW0rJy0nK2RkOwogIHJldHVybiBpc29kYXRlOwp9CmZ1bmN0aW9uIGV2YWx1YXRlUGl4ZWwoc2FtcGxlcyxzY2VuZXMpIHsgIAogIHZhciBSbWFzdGVyID0gMDt2YXIgUnNsYXZlID0gMDsKICB2YXIgR21hc3RlciA9IDA7dmFyIEdzbGF2ZSA9IDA7CiAgdmFyIEJtYXN0ZXIgPSAwO3ZhciBCc2xhdmUgPSAwOwogIFJtYXN0ZXIgPSBjYWxjUihzYW1wbGVzWzFdKTsKICBSc2xhdmUgPSBjYWxjUihzYW1wbGVzWzBdKTsgIAogIEdtYXN0ZXIgPSBjYWxjRyhzYW1wbGVzWzFdKTsKICBHc2xhdmUgPSBjYWxjRyhzYW1wbGVzWzBdKTsgIAogIEJtYXN0ZXIgPSBjYWxjQihzYW1wbGVzWzFdKTsKICBCc2xhdmUgPSBjYWxjQihzYW1wbGVzWzBdKTsKICBSZGlmPVJzbGF2ZS1SbWFzdGVyOwogIEdkaWY9R3NsYXZlLUdtYXN0ZXI7CiAgQmRpZj1Cc2xhdmUtQm1hc3RlcjsKICByZXR1cm4gW1JzbGF2ZSxHZGlmLEJzbGF2ZV0KfQ%3D%3D&temporal=true
// slave_date = "2018-05-18": https://apps.sentinel-hub.com/sentinel-playground-temporal/?source=S1-AWS-IW-VVVH&lat=44.683972246144066&lng=12.169933319091797&zoom=13&preset=CUSTOM&layers=VV,VV,VV&maxcc=100&gain=1.0&gamma=1.0&time=2017-01-01%7C2018-05-24&atmFilter=&showDates=true&evalscript=dmFyIG1hc3Rlcl9kYXRlID0gIjIwMTgtMDQtMjAiOyB2YXIgc2xhdmVfZGF0ZSA9ICIyMDE4LTA1LTE4IjsgLy8gQ29tYWNjaGlvLCBGZXJyYXJhLCBJdGFseSAgIAoKLy8gU2VsZWN0aW9uIG9mIHBvbGFyaXphdGlvbnMgCmZ1bmN0aW9uIHNldHVwIChkc3MpIHsKICBzZXRJbnB1dENvbXBvbmVudHMoW2Rzcy5WVixkc3MuVkhdKTsKICBzZXRPdXRwdXRDb21wb25lbnRDb3VudCgzKTsgIC8vIHJldHVybiBhcyBSR0IKfQoKZnVuY3Rpb24gZmlsdGVyU2NlbmVzIChzY2VuZXMpIHsgIApyZXR1cm4gc2NlbmVzLmZpbHRlcihmdW5jdGlvbiAoc2NlbmUpIHsKLy8gc2V0IGRhdGVzIGZvciBtYXN0ZXIgYW5kIHNsYXZlIGltYWdlcwp2YXIgYWxsb3dlZERhdGVzID0gW21hc3Rlcl9kYXRlLHNsYXZlX2RhdGVdOyAKdmFyIHNjZW5lRGF0ZVN0ciA9IGRhdGVmb3JtYXQoc2NlbmUuZGF0ZSk7CmlmIChhbGxvd2VkRGF0ZXMuaW5kZXhPZihzY2VuZURhdGVTdHIpIT0gLTEpIHJldHVybiB0cnVlOwplbHNlIHJldHVybiBmYWxzZTsKICB9KTsKfQoKLy8gQ3JvcCBNb25pdG9yaW5nCmZ1bmN0aW9uIGNhbGNCKHNhbXBsZSkgewogIHZhciBvdXRCID0gKC41KihzYW1wbGUuVlYpKTsKICByZXR1cm4gW291dEJdOwp9CmZ1bmN0aW9uIGNhbGNHKHNhbXBsZSkgewogIHZhciBvdXRHID0gKDgqKHNhbXBsZS5WSCkpOwogIHJldHVybiBbb3V0R107Cn0KZnVuY3Rpb24gY2FsY1Ioc2FtcGxlKSB7CiAgdmFyIG91dFIgPSAoMS41KihzYW1wbGUuVlYpKTsKICByZXR1cm4gW291dFJdOwp9CgpmdW5jdGlvbiBkYXRlZm9ybWF0KGQpeyAgCiAgdmFyIGRkID0gZC5nZXREYXRlKCk7CiAgdmFyIG1tID0gZC5nZXRNb250aCgpKzE7CiAgdmFyIHl5eXkgPSBkLmdldEZ1bGxZZWFyKCk7CiAgaWYoZGQ8MTApe2RkPScwJytkZH0KICBpZihtbTwxMCl7bW09JzAnK21tfQogIHZhciBpc29kYXRlID0geXl5eSsnLScrbW0rJy0nK2RkOwogIHJldHVybiBpc29kYXRlOwp9CmZ1bmN0aW9uIGV2YWx1YXRlUGl4ZWwoc2FtcGxlcyxzY2VuZXMpIHsgIAogIHZhciBSbWFzdGVyID0gMDt2YXIgUnNsYXZlID0gMDsKICB2YXIgR21hc3RlciA9IDA7dmFyIEdzbGF2ZSA9IDA7CiAgdmFyIEJtYXN0ZXIgPSAwO3ZhciBCc2xhdmUgPSAwOwogIFJtYXN0ZXIgPSBjYWxjUihzYW1wbGVzWzFdKTsKICBSc2xhdmUgPSBjYWxjUihzYW1wbGVzWzBdKTsgIAogIEdtYXN0ZXIgPSBjYWxjRyhzYW1wbGVzWzFdKTsKICBHc2xhdmUgPSBjYWxjRyhzYW1wbGVzWzBdKTsgIAogIEJtYXN0ZXIgPSBjYWxjQihzYW1wbGVzWzFdKTsKICBCc2xhdmUgPSBjYWxjQihzYW1wbGVzWzBdKTsKICBSZGlmPVJzbGF2ZS1SbWFzdGVyOwogIEdkaWY9R3NsYXZlLUdtYXN0ZXI7CiAgQmRpZj1Cc2xhdmUtQm1hc3RlcjsKICByZXR1cm4gW1JzbGF2ZSxHZGlmLEJzbGF2ZV0KfQ%3D%3D&temporal=true
// slave_date = "2018-05-30": https://apps.sentinel-hub.com/sentinel-playground-temporal/?source=S1-AWS-IW-VVVH&lat=44.683972246144066&lng=12.169933319091797&zoom=13&preset=CUSTOM&layers=VV,VV,VV&maxcc=100&gain=1.0&gamma=1.0&time=2017-01-01%7C2018-06-05&atmFilter=&showDates=true&evalscript=dmFyIG1hc3Rlcl9kYXRlID0gIjIwMTgtMDQtMjAiOyB2YXIgc2xhdmVfZGF0ZSA9ICIyMDE4LTA1LTMwIjsgLy8gQ29tYWNjaGlvLCBGZXJyYXJhLCBJdGFseSAgIAoKLy8gU2VsZWN0aW9uIG9mIHBvbGFyaXphdGlvbnMgCmZ1bmN0aW9uIHNldHVwIChkc3MpIHsKICBzZXRJbnB1dENvbXBvbmVudHMoW2Rzcy5WVixkc3MuVkhdKTsKICBzZXRPdXRwdXRDb21wb25lbnRDb3VudCgzKTsgIC8vIHJldHVybiBhcyBSR0IKfQoKZnVuY3Rpb24gZmlsdGVyU2NlbmVzIChzY2VuZXMpIHsgIApyZXR1cm4gc2NlbmVzLmZpbHRlcihmdW5jdGlvbiAoc2NlbmUpIHsKLy8gc2V0IGRhdGVzIGZvciBtYXN0ZXIgYW5kIHNsYXZlIGltYWdlcwp2YXIgYWxsb3dlZERhdGVzID0gW21hc3Rlcl9kYXRlLHNsYXZlX2RhdGVdOyAKdmFyIHNjZW5lRGF0ZVN0ciA9IGRhdGVmb3JtYXQoc2NlbmUuZGF0ZSk7CmlmIChhbGxvd2VkRGF0ZXMuaW5kZXhPZihzY2VuZURhdGVTdHIpIT0gLTEpIHJldHVybiB0cnVlOwplbHNlIHJldHVybiBmYWxzZTsKICB9KTsKfQoKLy8gQ3JvcCBNb25pdG9yaW5nCmZ1bmN0aW9uIGNhbGNCKHNhbXBsZSkgewogIHZhciBvdXRCID0gKC41KihzYW1wbGUuVlYpKTsKICByZXR1cm4gW291dEJdOwp9CmZ1bmN0aW9uIGNhbGNHKHNhbXBsZSkgewogIHZhciBvdXRHID0gKDgqKHNhbXBsZS5WSCkpOwogIHJldHVybiBbb3V0R107Cn0KZnVuY3Rpb24gY2FsY1Ioc2FtcGxlKSB7CiAgdmFyIG91dFIgPSAoMS41KihzYW1wbGUuVlYpKTsKICByZXR1cm4gW291dFJdOwp9CgpmdW5jdGlvbiBkYXRlZm9ybWF0KGQpeyAgCiAgdmFyIGRkID0gZC5nZXREYXRlKCk7CiAgdmFyIG1tID0gZC5nZXRNb250aCgpKzE7CiAgdmFyIHl5eXkgPSBkLmdldEZ1bGxZZWFyKCk7CiAgaWYoZGQ8MTApe2RkPScwJytkZH0KICBpZihtbTwxMCl7bW09JzAnK21tfQogIHZhciBpc29kYXRlID0geXl5eSsnLScrbW0rJy0nK2RkOwogIHJldHVybiBpc29kYXRlOwp9CmZ1bmN0aW9uIGV2YWx1YXRlUGl4ZWwoc2FtcGxlcyxzY2VuZXMpIHsgIAogIHZhciBSbWFzdGVyID0gMDt2YXIgUnNsYXZlID0gMDsKICB2YXIgR21hc3RlciA9IDA7dmFyIEdzbGF2ZSA9IDA7CiAgdmFyIEJtYXN0ZXIgPSAwO3ZhciBCc2xhdmUgPSAwOwogIFJtYXN0ZXIgPSBjYWxjUihzYW1wbGVzWzFdKTsKICBSc2xhdmUgPSBjYWxjUihzYW1wbGVzWzBdKTsgIAogIEdtYXN0ZXIgPSBjYWxjRyhzYW1wbGVzWzFdKTsKICBHc2xhdmUgPSBjYWxjRyhzYW1wbGVzWzBdKTsgIAogIEJtYXN0ZXIgPSBjYWxjQihzYW1wbGVzWzFdKTsKICBCc2xhdmUgPSBjYWxjQihzYW1wbGVzWzBdKTsKICBSZGlmPVJzbGF2ZS1SbWFzdGVyOwogIEdkaWY9R3NsYXZlLUdtYXN0ZXI7CiAgQmRpZj1Cc2xhdmUtQm1hc3RlcjsKICByZXR1cm4gW1JzbGF2ZSxHZGlmLEJzbGF2ZV0KfQ%3D%3D&temporal=true
// slave_date = "2018-06-17": https://apps.sentinel-hub.com/sentinel-playground-temporal/?source=S1-AWS-IW-VVVH&lat=44.683972246144066&lng=12.169933319091797&zoom=13&preset=CUSTOM&layers=VV,VV,VV&maxcc=100&gain=1.0&gamma=1.0&time=2017-01-01%7C2018-06-23&atmFilter=&showDates=true&evalscript=dmFyIG1hc3Rlcl9kYXRlID0gIjIwMTgtMDQtMjAiOyB2YXIgc2xhdmVfZGF0ZSA9ICIyMDE4LTA2LTE3IjsgLy8gQ29tYWNjaGlvLCBGZXJyYXJhLCBJdGFseSAgIAoKLy8gU2VsZWN0aW9uIG9mIHBvbGFyaXphdGlvbnMgCmZ1bmN0aW9uIHNldHVwIChkc3MpIHsKICBzZXRJbnB1dENvbXBvbmVudHMoW2Rzcy5WVixkc3MuVkhdKTsKICBzZXRPdXRwdXRDb21wb25lbnRDb3VudCgzKTsgIC8vIHJldHVybiBhcyBSR0IKfQoKZnVuY3Rpb24gZmlsdGVyU2NlbmVzIChzY2VuZXMpIHsgIApyZXR1cm4gc2NlbmVzLmZpbHRlcihmdW5jdGlvbiAoc2NlbmUpIHsKLy8gc2V0IGRhdGVzIGZvciBtYXN0ZXIgYW5kIHNsYXZlIGltYWdlcwp2YXIgYWxsb3dlZERhdGVzID0gW21hc3Rlcl9kYXRlLHNsYXZlX2RhdGVdOyAKdmFyIHNjZW5lRGF0ZVN0ciA9IGRhdGVmb3JtYXQoc2NlbmUuZGF0ZSk7CmlmIChhbGxvd2VkRGF0ZXMuaW5kZXhPZihzY2VuZURhdGVTdHIpIT0gLTEpIHJldHVybiB0cnVlOwplbHNlIHJldHVybiBmYWxzZTsKICB9KTsKfQoKLy8gQ3JvcCBNb25pdG9yaW5nCmZ1bmN0aW9uIGNhbGNCKHNhbXBsZSkgewogIHZhciBvdXRCID0gKC41KihzYW1wbGUuVlYpKTsKICByZXR1cm4gW291dEJdOwp9CmZ1bmN0aW9uIGNhbGNHKHNhbXBsZSkgewogIHZhciBvdXRHID0gKDgqKHNhbXBsZS5WSCkpOwogIHJldHVybiBbb3V0R107Cn0KZnVuY3Rpb24gY2FsY1Ioc2FtcGxlKSB7CiAgdmFyIG91dFIgPSAoMS41KihzYW1wbGUuVlYpKTsKICByZXR1cm4gW291dFJdOwp9CgpmdW5jdGlvbiBkYXRlZm9ybWF0KGQpeyAgCiAgdmFyIGRkID0gZC5nZXREYXRlKCk7CiAgdmFyIG1tID0gZC5nZXRNb250aCgpKzE7CiAgdmFyIHl5eXkgPSBkLmdldEZ1bGxZZWFyKCk7CiAgaWYoZGQ8MTApe2RkPScwJytkZH0KICBpZihtbTwxMCl7bW09JzAnK21tfQogIHZhciBpc29kYXRlID0geXl5eSsnLScrbW0rJy0nK2RkOwogIHJldHVybiBpc29kYXRlOwp9CmZ1bmN0aW9uIGV2YWx1YXRlUGl4ZWwoc2FtcGxlcyxzY2VuZXMpIHsgIAogIHZhciBSbWFzdGVyID0gMDt2YXIgUnNsYXZlID0gMDsKICB2YXIgR21hc3RlciA9IDA7dmFyIEdzbGF2ZSA9IDA7CiAgdmFyIEJtYXN0ZXIgPSAwO3ZhciBCc2xhdmUgPSAwOwogIFJtYXN0ZXIgPSBjYWxjUihzYW1wbGVzWzFdKTsKICBSc2xhdmUgPSBjYWxjUihzYW1wbGVzWzBdKTsgIAogIEdtYXN0ZXIgPSBjYWxjRyhzYW1wbGVzWzFdKTsKICBHc2xhdmUgPSBjYWxjRyhzYW1wbGVzWzBdKTsgIAogIEJtYXN0ZXIgPSBjYWxjQihzYW1wbGVzWzFdKTsKICBCc2xhdmUgPSBjYWxjQihzYW1wbGVzWzBdKTsKICBSZGlmPVJzbGF2ZS1SbWFzdGVyOwogIEdkaWY9R3NsYXZlLUdtYXN0ZXI7CiAgQmRpZj1Cc2xhdmUtQm1hc3RlcjsKICByZXR1cm4gW1JzbGF2ZSxHZGlmLEJzbGF2ZV0KfQ%3D%3D&temporal=true
// slave_date = "2018-07-17": https://apps.sentinel-hub.com/sentinel-playground-temporal/?source=S1-AWS-IW-VVVH&lat=44.683972246144066&lng=12.169933319091797&zoom=13&preset=CUSTOM&layers=VV,VV,VV&maxcc=100&gain=1.0&gamma=1.0&time=2017-01-01%7C2018-07-23&atmFilter=&showDates=true&evalscript=dmFyIG1hc3Rlcl9kYXRlID0gIjIwMTgtMDQtMjAiOyB2YXIgc2xhdmVfZGF0ZSA9ICIyMDE4LTA3LTE3IjsgLy8gQ29tYWNjaGlvLCBGZXJyYXJhLCBJdGFseSAgIAoKLy8gU2VsZWN0aW9uIG9mIHBvbGFyaXphdGlvbnMgCmZ1bmN0aW9uIHNldHVwIChkc3MpIHsKICBzZXRJbnB1dENvbXBvbmVudHMoW2Rzcy5WVixkc3MuVkhdKTsKICBzZXRPdXRwdXRDb21wb25lbnRDb3VudCgzKTsgIC8vIHJldHVybiBhcyBSR0IKfQoKZnVuY3Rpb24gZmlsdGVyU2NlbmVzIChzY2VuZXMpIHsgIApyZXR1cm4gc2NlbmVzLmZpbHRlcihmdW5jdGlvbiAoc2NlbmUpIHsKLy8gc2V0IGRhdGVzIGZvciBtYXN0ZXIgYW5kIHNsYXZlIGltYWdlcwp2YXIgYWxsb3dlZERhdGVzID0gW21hc3Rlcl9kYXRlLHNsYXZlX2RhdGVdOyAKdmFyIHNjZW5lRGF0ZVN0ciA9IGRhdGVmb3JtYXQoc2NlbmUuZGF0ZSk7CmlmIChhbGxvd2VkRGF0ZXMuaW5kZXhPZihzY2VuZURhdGVTdHIpIT0gLTEpIHJldHVybiB0cnVlOwplbHNlIHJldHVybiBmYWxzZTsKICB9KTsKfQoKLy8gQ3JvcCBNb25pdG9yaW5nCmZ1bmN0aW9uIGNhbGNCKHNhbXBsZSkgewogIHZhciBvdXRCID0gKC41KihzYW1wbGUuVlYpKTsKICByZXR1cm4gW291dEJdOwp9CmZ1bmN0aW9uIGNhbGNHKHNhbXBsZSkgewogIHZhciBvdXRHID0gKDgqKHNhbXBsZS5WSCkpOwogIHJldHVybiBbb3V0R107Cn0KZnVuY3Rpb24gY2FsY1Ioc2FtcGxlKSB7CiAgdmFyIG91dFIgPSAoMS41KihzYW1wbGUuVlYpKTsKICByZXR1cm4gW291dFJdOwp9CgpmdW5jdGlvbiBkYXRlZm9ybWF0KGQpeyAgCiAgdmFyIGRkID0gZC5nZXREYXRlKCk7CiAgdmFyIG1tID0gZC5nZXRNb250aCgpKzE7CiAgdmFyIHl5eXkgPSBkLmdldEZ1bGxZZWFyKCk7CiAgaWYoZGQ8MTApe2RkPScwJytkZH0KICBpZihtbTwxMCl7bW09JzAnK21tfQogIHZhciBpc29kYXRlID0geXl5eSsnLScrbW0rJy0nK2RkOwogIHJldHVybiBpc29kYXRlOwp9CmZ1bmN0aW9uIGV2YWx1YXRlUGl4ZWwoc2FtcGxlcyxzY2VuZXMpIHsgIAogIHZhciBSbWFzdGVyID0gMDt2YXIgUnNsYXZlID0gMDsKICB2YXIgR21hc3RlciA9IDA7dmFyIEdzbGF2ZSA9IDA7CiAgdmFyIEJtYXN0ZXIgPSAwO3ZhciBCc2xhdmUgPSAwOwogIFJtYXN0ZXIgPSBjYWxjUihzYW1wbGVzWzFdKTsKICBSc2xhdmUgPSBjYWxjUihzYW1wbGVzWzBdKTsgIAogIEdtYXN0ZXIgPSBjYWxjRyhzYW1wbGVzWzFdKTsKICBHc2xhdmUgPSBjYWxjRyhzYW1wbGVzWzBdKTsgIAogIEJtYXN0ZXIgPSBjYWxjQihzYW1wbGVzWzFdKTsKICBCc2xhdmUgPSBjYWxjQihzYW1wbGVzWzBdKTsKICBSZGlmPVJzbGF2ZS1SbWFzdGVyOwogIEdkaWY9R3NsYXZlLUdtYXN0ZXI7CiAgQmRpZj1Cc2xhdmUtQm1hc3RlcjsKICByZXR1cm4gW1JzbGF2ZSxHZGlmLEJzbGF2ZV0KfQ%3D%3D&temporal=true
// slave_date = "2018-08-04": https://apps.sentinel-hub.com/sentinel-playground-temporal/?source=S1-AWS-IW-VVVH&lat=44.683972246144066&lng=12.169933319091797&zoom=13&preset=CUSTOM&layers=VV,VV,VV&maxcc=100&gain=1.0&gamma=1.0&time=2017-01-01%7C2018-08-18&atmFilter=&showDates=true&evalscript=dmFyIG1hc3Rlcl9kYXRlID0gIjIwMTgtMDQtMjAiOyB2YXIgc2xhdmVfZGF0ZSA9ICIyMDE4LTA4LTA0IjsgLy8gQ29tYWNjaGlvLCBGZXJyYXJhLCBJdGFseSAgIAoKLy8gU2VsZWN0aW9uIG9mIHBvbGFyaXphdGlvbnMgCmZ1bmN0aW9uIHNldHVwIChkc3MpIHsKICBzZXRJbnB1dENvbXBvbmVudHMoW2Rzcy5WVixkc3MuVkhdKTsKICBzZXRPdXRwdXRDb21wb25lbnRDb3VudCgzKTsgIC8vIHJldHVybiBhcyBSR0IKfQoKZnVuY3Rpb24gZmlsdGVyU2NlbmVzIChzY2VuZXMpIHsgIApyZXR1cm4gc2NlbmVzLmZpbHRlcihmdW5jdGlvbiAoc2NlbmUpIHsKLy8gc2V0IGRhdGVzIGZvciBtYXN0ZXIgYW5kIHNsYXZlIGltYWdlcwp2YXIgYWxsb3dlZERhdGVzID0gW21hc3Rlcl9kYXRlLHNsYXZlX2RhdGVdOyAKdmFyIHNjZW5lRGF0ZVN0ciA9IGRhdGVmb3JtYXQoc2NlbmUuZGF0ZSk7CmlmIChhbGxvd2VkRGF0ZXMuaW5kZXhPZihzY2VuZURhdGVTdHIpIT0gLTEpIHJldHVybiB0cnVlOwplbHNlIHJldHVybiBmYWxzZTsKICB9KTsKfQoKLy8gQ3JvcCBNb25pdG9yaW5nCmZ1bmN0aW9uIGNhbGNCKHNhbXBsZSkgewogIHZhciBvdXRCID0gKC41KihzYW1wbGUuVlYpKTsKICByZXR1cm4gW291dEJdOwp9CmZ1bmN0aW9uIGNhbGNHKHNhbXBsZSkgewogIHZhciBvdXRHID0gKDgqKHNhbXBsZS5WSCkpOwogIHJldHVybiBbb3V0R107Cn0KZnVuY3Rpb24gY2FsY1Ioc2FtcGxlKSB7CiAgdmFyIG91dFIgPSAoMS41KihzYW1wbGUuVlYpKTsKICByZXR1cm4gW291dFJdOwp9CgpmdW5jdGlvbiBkYXRlZm9ybWF0KGQpeyAgCiAgdmFyIGRkID0gZC5nZXREYXRlKCk7CiAgdmFyIG1tID0gZC5nZXRNb250aCgpKzE7CiAgdmFyIHl5eXkgPSBkLmdldEZ1bGxZZWFyKCk7CiAgaWYoZGQ8MTApe2RkPScwJytkZH0KICBpZihtbTwxMCl7bW09JzAnK21tfQogIHZhciBpc29kYXRlID0geXl5eSsnLScrbW0rJy0nK2RkOwogIHJldHVybiBpc29kYXRlOwp9CmZ1bmN0aW9uIGV2YWx1YXRlUGl4ZWwoc2FtcGxlcyxzY2VuZXMpIHsgIAogIHZhciBSbWFzdGVyID0gMDt2YXIgUnNsYXZlID0gMDsKICB2YXIgR21hc3RlciA9IDA7dmFyIEdzbGF2ZSA9IDA7CiAgdmFyIEJtYXN0ZXIgPSAwO3ZhciBCc2xhdmUgPSAwOwogIFJtYXN0ZXIgPSBjYWxjUihzYW1wbGVzWzFdKTsKICBSc2xhdmUgPSBjYWxjUihzYW1wbGVzWzBdKTsgIAogIEdtYXN0ZXIgPSBjYWxjRyhzYW1wbGVzWzFdKTsKICBHc2xhdmUgPSBjYWxjRyhzYW1wbGVzWzBdKTsgIAogIEJtYXN0ZXIgPSBjYWxjQihzYW1wbGVzWzFdKTsKICBCc2xhdmUgPSBjYWxjQihzYW1wbGVzWzBdKTsKICBSZGlmPVJzbGF2ZS1SbWFzdGVyOwogIEdkaWY9R3NsYXZlLUdtYXN0ZXI7CiAgQmRpZj1Cc2xhdmUtQm1hc3RlcjsKICByZXR1cm4gW1JzbGF2ZSxHZGlmLEJzbGF2ZV0KfQ%3D%3D&temporal=true
// slave_date = "2018-08-22": https://apps.sentinel-hub.com/sentinel-playground-temporal/?source=S1-AWS-IW-VVVH&lat=44.683972246144066&lng=12.169933319091797&zoom=13&preset=CUSTOM&layers=VV,VV,VV&maxcc=100&gain=1.0&gamma=1.0&time=2017-01-01%7C2018-08-28&atmFilter=&showDates=true&evalscript=dmFyIG1hc3Rlcl9kYXRlID0gIjIwMTgtMDQtMjAiOyB2YXIgc2xhdmVfZGF0ZSA9ICIyMDE4LTA4LTIyIjsgLy8gQ29tYWNjaGlvLCBGZXJyYXJhLCBJdGFseSAgIAoKLy8gU2VsZWN0aW9uIG9mIHBvbGFyaXphdGlvbnMgCmZ1bmN0aW9uIHNldHVwIChkc3MpIHsKICBzZXRJbnB1dENvbXBvbmVudHMoW2Rzcy5WVixkc3MuVkhdKTsKICBzZXRPdXRwdXRDb21wb25lbnRDb3VudCgzKTsgIC8vIHJldHVybiBhcyBSR0IKfQoKZnVuY3Rpb24gZmlsdGVyU2NlbmVzIChzY2VuZXMpIHsgIApyZXR1cm4gc2NlbmVzLmZpbHRlcihmdW5jdGlvbiAoc2NlbmUpIHsKLy8gc2V0IGRhdGVzIGZvciBtYXN0ZXIgYW5kIHNsYXZlIGltYWdlcwp2YXIgYWxsb3dlZERhdGVzID0gW21hc3Rlcl9kYXRlLHNsYXZlX2RhdGVdOyAKdmFyIHNjZW5lRGF0ZVN0ciA9IGRhdGVmb3JtYXQoc2NlbmUuZGF0ZSk7CmlmIChhbGxvd2VkRGF0ZXMuaW5kZXhPZihzY2VuZURhdGVTdHIpIT0gLTEpIHJldHVybiB0cnVlOwplbHNlIHJldHVybiBmYWxzZTsKICB9KTsKfQoKLy8gQ3JvcCBNb25pdG9yaW5nCmZ1bmN0aW9uIGNhbGNCKHNhbXBsZSkgewogIHZhciBvdXRCID0gKC41KihzYW1wbGUuVlYpKTsKICByZXR1cm4gW291dEJdOwp9CmZ1bmN0aW9uIGNhbGNHKHNhbXBsZSkgewogIHZhciBvdXRHID0gKDgqKHNhbXBsZS5WSCkpOwogIHJldHVybiBbb3V0R107Cn0KZnVuY3Rpb24gY2FsY1Ioc2FtcGxlKSB7CiAgdmFyIG91dFIgPSAoMS41KihzYW1wbGUuVlYpKTsKICByZXR1cm4gW291dFJdOwp9CgpmdW5jdGlvbiBkYXRlZm9ybWF0KGQpeyAgCiAgdmFyIGRkID0gZC5nZXREYXRlKCk7CiAgdmFyIG1tID0gZC5nZXRNb250aCgpKzE7CiAgdmFyIHl5eXkgPSBkLmdldEZ1bGxZZWFyKCk7CiAgaWYoZGQ8MTApe2RkPScwJytkZH0KICBpZihtbTwxMCl7bW09JzAnK21tfQogIHZhciBpc29kYXRlID0geXl5eSsnLScrbW0rJy0nK2RkOwogIHJldHVybiBpc29kYXRlOwp9CmZ1bmN0aW9uIGV2YWx1YXRlUGl4ZWwoc2FtcGxlcyxzY2VuZXMpIHsgIAogIHZhciBSbWFzdGVyID0gMDt2YXIgUnNsYXZlID0gMDsKICB2YXIgR21hc3RlciA9IDA7dmFyIEdzbGF2ZSA9IDA7CiAgdmFyIEJtYXN0ZXIgPSAwO3ZhciBCc2xhdmUgPSAwOwogIFJtYXN0ZXIgPSBjYWxjUihzYW1wbGVzWzFdKTsKICBSc2xhdmUgPSBjYWxjUihzYW1wbGVzWzBdKTsgIAogIEdtYXN0ZXIgPSBjYWxjRyhzYW1wbGVzWzFdKTsKICBHc2xhdmUgPSBjYWxjRyhzYW1wbGVzWzBdKTsgIAogIEJtYXN0ZXIgPSBjYWxjQihzYW1wbGVzWzFdKTsKICBCc2xhdmUgPSBjYWxjQihzYW1wbGVzWzBdKTsKICBSZGlmPVJzbGF2ZS1SbWFzdGVyOwogIEdkaWY9R3NsYXZlLUdtYXN0ZXI7CiAgQmRpZj1Cc2xhdmUtQm1hc3RlcjsKICByZXR1cm4gW1JzbGF2ZSxHZGlmLEJzbGF2ZV0KfQ%3D%3D&temporal=true
// ***

// Date Definition 
//var master_date = "2018-04-20"; var slave_date = "2018-04-24"; // Comacchio, Ferrara, Italy 
//var master_date = "2018-04-20"; var slave_date = "2018-05-06";    
//var master_date = "2018-04-20"; var slave_date = "2018-05-18";    
//var master_date = "2018-04-20"; var slave_date = "2018-05-30";     
//var master_date = "2018-04-20"; var slave_date = "2018-06-17";    
//var master_date = "2018-04-20"; var slave_date = "2018-07-17";   
//var master_date = "2018-04-20"; var slave_date = "2018-08-04"; 
  var master_date = "2018-04-20"; var slave_date = "2018-08-22"; 

// Selection of polarizations 
function setup (dss) {
  setInputComponents([dss.VV,dss.VH]);
  setOutputComponentCount(3);  // return as RGB
}

function filterScenes (scenes) {  
return scenes.filter(function (scene) {
// set dates for master and slave images
var allowedDates = [master_date,slave_date]; 
var sceneDateStr = dateformat(scene.date);
if (allowedDates.indexOf(sceneDateStr)!= -1) return true;
else return false;
  });
}

// Crop Monitoring
function calcB(sample) {
  var outB = (.5*(sample.VV));
  return [outB];
}
function calcG(sample) {
  var outG = (8*(sample.VH));
  return [outG];
}
function calcR(sample) {
  var outR = (1.5*(sample.VV));
  return [outR];
}

function dateformat(d){  
  var dd = d.getDate();
  var mm = d.getMonth()+1;
  var yyyy = d.getFullYear();
  if(dd<10){dd='0'+dd}
  if(mm<10){mm='0'+mm}
  var isodate = yyyy+'-'+mm+'-'+dd;
  return isodate;
}
function evaluatePixel(samples,scenes) {  
  var Rmaster = 0;var Rslave = 0;
  var Gmaster = 0;var Gslave = 0;
  var Bmaster = 0;var Bslave = 0;
  Rmaster = calcR(samples[1]);
  Rslave = calcR(samples[0]);  
  Gmaster = calcG(samples[1]);
  Gslave = calcG(samples[0]);  
  Bmaster = calcB(samples[1]);
  Bslave = calcB(samples[0]);
  //Rdif=Rslave-Rmaster;
  Gdif=Gslave-Gmaster;
  //Bdif=Bslave-Bmaster;
  return [Rslave,Gdif,Bslave]
}